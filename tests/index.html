<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è</title>
    <style>
      /* –ó–∞–≥–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ */
      body {
        font-family: "Orbitron", sans-serif;
        background: linear-gradient(45deg, #6a11cb, #2575fc, #2ecc71);
        color: white;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        box-sizing: border-box;
      }

      header {
        background: rgba(0, 0, 0, 0.7);
        padding: 15px 0;
        text-align: center;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        width: 100%;
      }

      nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      nav ul li {
        margin: 0 15px;
      }

      nav ul li a {
        color: white;
        text-decoration: none;
        font-weight: bold;
        transition: color 0.3s ease, transform 0.3s ease;
        font-size: 18px;
      }

      nav ul li a:hover {
        color: #ff9a9e;
        transform: scale(1.1);
        text-shadow: 0 0 8px #ff9a9e;
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
      .main-container {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        width: 100%;
        height: 100vh;
        padding-top: 80px;
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è —Ç–µ—Å—Ç—É */
      #test-container {
        display: none;
        width: 80%;
        max-width: 800px;
        background: rgba(0, 0, 0, 0.4);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.5);
        margin-bottom: 30px;
        text-align: center;
        height: 600px;
        overflow-y: auto;
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è –ø–∏—Ç–∞–Ω—å */
      .question {
        margin-bottom: 20px;
        font-size: 1.7rem;
      }

      .question p {
        font-size: 1.3rem;
        font-weight: bold;
        color: #e0e0e0;
        text-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π */
      .question label {
        display: block;
        margin: 10px 0;
        font-size: 1rem;
        cursor: pointer;
        color: #00e5ff;
        transition: color 0.3s ease;
      }

      .question label:hover {
        color: #00ffe7;
        text-shadow: 0 0 8px #00ffe7;
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–∫–∏ 'Next' */
      #next-button,
      #submit-button {
        padding: 12px 25px;
        background: linear-gradient(135deg, #ff6ec4, #7873f5);
        border: none;
        color: white;
        font-size: 1.2rem;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.3s ease, background 0.3s ease;
        margin-top: 20px;
      }

      #next-button:hover,
      #submit-button:hover {
        transform: scale(1.1);
        background: linear-gradient(135deg, #ff9d76, #7873f5);
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ */
      #result-container {
        display: none;
        text-align: center;
        padding: 30px;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 15px;
        box-shadow: 0px 15px 40px rgba(0, 0, 0, 0.6);
        width: 350px;
        margin-top: 30px;
      }

      #result-container p {
        font-size: 1.8rem;
        color: #ffffff;
      }

      /* –ê–Ω—ñ–º–∞—Ü—ñ—è fadeInUp */
      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(30px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ */
      @media (max-width: 600px) {
        #test-container,
        #result-container {
          width: 90%;
        }

        #next-button,
        #submit-button {
          font-size: 1rem;
          padding: 10px 20px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="../index.html">–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞</a></li>
          <li><a href="../tests/wallet.html">–í–∞—à –≥–∞–º–∞–Ω–µ—Ü—å</a></li>
          <li><a href="../menu.html">–ú–µ–Ω—é</a></li>
          <li><a href="tests/index.html">–¢–µ—Å—Ç–∏</a></li>
          <li><a href="../cart.html">üõí</a></li>
        </ul>
      </nav>
    </header>

    <div class="main-container">
      <div id="start-container">
        <button id="next-button" onclick="startTest()">–ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç</button>
      </div>

      <div id="test-container">
        <form id="test-form">
          <div id="questions-container"></div>
          <button id="submit-button" type="button" onclick="submitTest()">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–µ—Å—Ç</button>
        </form>
      </div>

      <div id="result-container">
        <p id="score"></p>
        <p id="stars"></p>
        <p id="discount"></p>
        <button id="next-button" onclick="location.reload()">–ü–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
      </div>
    </div>

    <script>
      let questions = [];
      let correctAnswers = 0;

      // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∏—Ç–∞–Ω—å –∑ JSON
      async function loadTest() {
        try {
          const response = await fetch("questions.json"); // –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —à–ª—è—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
          if (!response.ok) {
            throw new Error("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è");
          }
          const data = await response.json();
          questions = data.questions;

          const questionsContainer = document.getElementById("questions-container");
          questionsContainer.innerHTML = "";

          if (questions.length === 0) {
            console.log("–ù–µ–º–∞—î –ø–∏—Ç–∞–Ω—å —É JSON!");
          }

          // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
          questions.forEach((question, index) => {
            const questionElement = document.createElement("div");
            questionElement.classList.add("question");

            const questionTitle = document.createElement("p");
            questionTitle.textContent = `${index + 1}. ${question.–ø–∏—Ç–∞–Ω–Ω—è}`;
            questionElement.appendChild(questionTitle);

            question.–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.forEach((answer, i) => {
              const answerElement = document.createElement("label");
              answerElement.innerHTML = `<input type="radio" name="question${index}" value="${i}"> ${answer}`;
              questionElement.appendChild(answerElement);
            });

            questionsContainer.appendChild(questionElement);
          });

          // –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–µ—Å—Ç—É
          document.getElementById("next-button").style.display = "none";
          document.getElementById("test-container").style.display = "block";
        } catch (error) {
          alert("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Ç–µ—Å—Ç—É: " + error.message);
        }
      }

      // –§—É–Ω–∫—Ü—ñ—è –ø–æ—á–∞—Ç–∫—É —Ç–µ—Å—Ç—É
      function startTest() {
        document.getElementById("start-container").style.display = "none";
        loadTest();
      }

      // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–æ–¥–∞—á—ñ —Ç–µ—Å—Ç—É
      function submitTest() {
        correctAnswers = 0;
        const form = document.getElementById("test-form");

        questions.forEach((question, index) => {
          const selectedAnswer = form.querySelector(`input[name="question${index}"]:checked`);

          if (selectedAnswer) {
            const answerIndex = parseInt(selectedAnswer.value);
            if (answerIndex === question.correctAnswer) {
              correctAnswers++;
            }
          }
        });

        displayResults();
      }

      // –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
      function displayResults() {
        document.getElementById("test-container").style.display = "none";
        document.getElementById("result-container").style.display = "block";

        const score = correctAnswers;
        const stars = score === 12 ? 3 : score >= 9 ? 2 : 1; // –ó–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

        document.getElementById("score").textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∑ 12`;
        document.getElementById("stars").textContent = `–ó—ñ—Ä–æ—á–∫–∏: ${stars}`;
        document.getElementById("discount").textContent = `–ó–Ω–∏–∂–∫–∞: ${stars * 5}%`; // –ó–Ω–∏–∂–∫–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑—ñ—Ä–æ—á–æ–∫
      }
    </script>
  </body>
</html>
